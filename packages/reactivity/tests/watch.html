<html !DOCTYPE>
	<head></head>
	<body>
		<div id="app">
			<div id="eRev"></div>
			<div id="eRef"></div>
			<div id="eRec"></div>
			<div id="eCom"></div>
			<button id="eBtn">Btn</button>
		</div>
		<script type="module">
			import { ref, watch } from '/node_modules/@vue3/reactivity/dist/reactivity.esm-browser.js'

			// 定义简单类型的响应式变量
			const refVar = ref({ deep: { n2: 2, n3: { n4: 4 } } })
			console.log('ref', refVar)

			// 定义监控
			watch(
				refVar,
				(newValue, oldValue) => {
					console.log('触发了 watch', newValue, oldValue)
				},
				{
					// immediate: true
					deep: true,
					depth: 2
				}
			)

			setTimeout(() => {
				// refVar.value.name = Math.random()
				// refVar.value = { ...refVar.value, name: Math.random() }
				refVar.value.deep.n3.n4 += 1
			}, 1000)

			eBtn.onclick = () => {
				// refVar.value.name = Math.random()
				refVar.value = { ...refVar.value, name: Math.random() }
			}
		</script>
	</body>
</html>
